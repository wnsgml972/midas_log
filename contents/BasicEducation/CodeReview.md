# Code Review

## Good PR (or Good Change Author)
### PR을 하는 이유는 무엇인가?
올바른 풀 요청을 구성하는 요소를 이해하려면 먼저 풀 요청 프로세스를 사용하는 이유를 정의해야합니다.
* PR은 코드베이스에 대한 정보를 공유하는 좋은 방법입니다. 그들은 **코드 소유권을 제한합니다.**
* 코드가 생산되기 전에 추가 게이트를 만듭니다.
* 코드 품질을 향상시킵니다. 실수를 저지르는 다른 사람이 있기 때문 만은 아닙니다. 누군가가 코드를 검토한다는 것을 알고 있다면 적어도 무의식적으로 더 나은 코드를 작성하기 위해 더 많은 노력을 기울일 것입니다.

### 좋은 PR이란 무엇인가?
PR을 검토 할 때마다 `Code Reviewer`는 다음과 같은 특성을 찾습니다.
* 논리적 커밋. 각 커밋은 하나의 일관된 변경이어야합니다.
* 모든 커밋 메시지는 설명 적입니다.
* 커밋 목록은 관련이 있으며 완전한 이야기를 구현합니다.
* PR의 작업은 정량화 가능한 가치를 더합니다.
* 코드는 정의 된 표준을 준수합니다.
* 풀 요청은 가능한 한 작습니다.

아래는 위의 목록에 대한 자세한 설명입니다.

### 커밋 메시지
좋은 커밋 메시지는 `Code Reviewer`가 작업하는데 정보를 얻을 수 있는 좋은 수단입니다. 커밋 메시지는 행해지는 일을 설명하는 것이 아닙니다. 그것은 중요한 정보이지만 이야기의 일부일뿐입니다. 일반적으로 수행되는 작업은 코드에서 쉽게 확인할 수 있습니다. 해당 코드의 History를 검색하는 검토자가 궁금한 것은 특정 구간이 **변경된 이유입니다.** 커밋 메시지의 주요 규칙은 다음과 같습니다.
* 변경된 내용.
* 공식적인 요구 사항을 참조하여 변경이 필요한 이유.
* 변화의 직간접적인 결과.

커밋에 포함되지 않아도 되는 것은 다음과 같습니다.
* 변경 한 사람 (이미 커밋의 일부 임)
* 변경이 이루어진 시점 (커밋의 일부)
* 이 코드를 개선하는 방법 (이것은 백 로그에 나와야 함)
* 코드에 대한 느낌

### 논리적 커밋
PR을 검토 할 때 정보의 절반 만 가지고 있으면 코드 품질을 판단하기가 정말 어렵습니다. 따라서 각 커밋에 하나의 일관된 변경 사항이 포함되어 이론적으로 스스로 검토 할 수 있어야합니다.

### 관련 커밋
PR을 제출하면 단일 테마와 관련이 있어야합니다. 상황을 명확하게 알 수없는 경우가 많으므로 코드 검토는 어려운 작업이 될 수 있습니다. PR이 여러 가지 사항을 수정하거나 구현하려고하면 더 어려워집니다. 이를 피하기 위해 작업중인 사용자 스토리(이슈)를 **여러 관련 커밋으로 나누고 단일 PR로 제출해야합니다.**

### PR은 수량화 가능한 가치를 추가합니다.
이것은 고객 요구 사항을 충족시키는 데 사용될 수 있지만 리팩터링, 성능 개선, 새로운 테스트 등일 수도 있습니다. 요구 사항을 구현하는 경우 이것이 가치를 추가한다는 것을 쉽게 알 수 있습니다. 그러나 리팩터 또는 성능 향상의 경우에는 더 어려울 수 있습니다. 이것들에서 당신은 보통 이것을 미리 논의하고 싶습니다. 그럼에도 불구하고 PR에 추가 된 가치가 있다는 것이 **PR에 제출되면 상당히 분명해야하며 결국 이것은 수량화 가능한 가치를 추가합니다.**

### 코드는 정의 된 표준을 준수합니다.
인간 `Code Reviewer`가 검토하는 것은 코드 스타일 같은 것은 아닙니다. (해당 부분은 정적분석을 통해 자동화 되어야 합니다.) 검토가 필요한 다른 표준이 있습니다. 이것들은 데이터 액세스 방법, 반복되는 패턴, 내부 라이브러리 사용 및 자신의 롤링과 같은 것일 수 있습니다. **PR을 제출하기 전에 `Change Author`가 확인해야합니다.**




<br/><br/>

## Good Reviewer
반대로, 좋은 PR을 만든다고해서 좋은 검토 프로세스가있는 것은 아닙니다. 코드를 검토하면서 그 반대 면도 매우 중요합니다. 다음은 도움이 될 수있는 검토중인 코드에 대한 질문 및 태도 목록입니다.
* 코드는 문제를 해결합니까?
* 출자가 의도 한대로 코드가 작동합니까?
* 문제를 어떻게 해결 했습니까?
* 유용한 추상화가 있습니까? (재사용 가능한 코드가 있습니까?)
* 악마를 옹호하십시오.
* 이 코드는 테스트에 포함되어 있습니까?

### 이 코드는 문제를 해결합니까?
이상적으로는 코드 작업을 시작하기 전에 사전 조건이되어야하지만 명확하지 않은 경우가 있으며 이것이 가장 좋은 질문입니다. 문제가 해결되지 않으면 나머지는 무의미합니다.

### 제출자가 의도 한대로 코드가 작동합니까?
목적이 올바른 것으로 확인되면 구현이 실제로 올바른지 확인해야합니다. 이것은 잠재적 인 버그를 발견하려고 시도했을뿐 아니라 제출자가 의도하지 않은 원치 않는 부작용도 발견 할 수 있습니다.

### 이 문제를 어떻게 해결 했습니까?
이것은 까다로운 것입니다. 때로는 개발자 스타일이 크게 다를 수 있습니다. 이 질문의 목적은 개발자가 당신의 방식으로 강요하도록하는 것이 아니라, 다른 코딩 스타일을 대조하고 하나가 다른 것보다 선호되는지 평가하는 것입니다.

### 유용한 추상화가 있습니까? (재사용 가능한 코드가 있습니까?)
때로는 문제가 다른 곳에서 이미 해결되었을 수도 있지만 저자는 알지 못합니다. 이것을 지적하고 이것을 사용하는 방법에 대한 아이디어를 제안하는 것이 좋습니다. 경우에 따라 기존 코드를 단순히 재사용하는 경우도 있고 의존하는 새로운 추상 개념을 도입해야하는 경우도 있습니다.

### 악마를 옹호하십시오.
실수, 오류, 관습에 대한 위반 등을 잡으려고 노력하십시오. 다른 개발자보다 우수성을 입증하지 않고 코드를 개선하는 것이 목표입니다. 모든 검토 의견은 코드에 관한 것이어야합니다. 개발자가 아닌 검토중인 코드입니다.

### 이 코드는 테스트에 포함되어 있습니까?
테스트는 회귀 문제뿐만 아니라 문서화에도 중요합니다. 코드가 매우 알고리즘 적이라면 자동화 된 단위 테스트가 필요할 수 있습니다 (힌트 : 구현중인 요구 사항 목록을 제공하므로 검토를 시작하기에 좋은 곳입니다). 반대로, 주로 코드를 조정하는 경우 단위 테스트가 추가되는 이유와 실제로 필요한지 여부에 대해 의문하십시오.




<br/><br/>

## Code Review의 표준 및 지침 설정 (실무에서 적용하려 할 때..)
좋은 PR을 제출하고 좋은 리뷰를하는 것 외에도 PR의 거부 시점과 병합 될 수있는 시점을 명확하게 이해하는 것이 퍼즐의 또 다른 부분입니다. 다음은 내가 갖추어야 할 표준 중 일부입니다. 이러한 상황은 상황에 따라 다를 수 있지만 매개 변수에 관계없이 모든 개발자간에 명확하게 이해하는 것이 좋습니다.

### Code Review 거절 사유
어떤 것들은 거부의 분명한 이유 일 수 있습니다. 이것들을 열거하고 모두에게 동의하는 것이 중요합니다. 초기 거부는 `Code Reviewer`와 `Change Author` 측 모두에서 많은 시간을 절약 할 수 있기 때문입니다. 사소한 문제에 대한 토론을 피합니다.

직선 거부로 이어질 수있는 몇 가지 사항 :
* 실패한 테스트 (CI 서버에서 이를 시행하는 것이 더 낫습니다)
* 스타일 가이드 라인을 따르지 않음 (자동 도구를 통해 시행하는 것이 더 낫습니다)
* 좋은 PR의 규칙에 대한 위반. 이것은 설명이 아닌 커밋 메시지, 매우 큰 PR, 하나의 PR에 여러 층을 의미 할 수 있습니다.

### 갈등 해결
결국 두 개발자가 동의하지 않는 상황에 처하게됩니다. 그것은 완벽하게 훌륭하고 실제로 좋은 팀 역학의 신호입니다. 그러나 좋지 않은 것은 선임, 관리자 권한 등의 이유로 인해 다른 개발자 또는 다른 개발자를 무시하는 것에 대해 끝없는 토론을하고 있습니다.

이러한 상황이 발생하지 않도록하고 충돌 해결 전략을 세우는 것이 좋습니다. 효과적인 방법 중 하나는 항상 최소한 두 명의 코드 검토자가 필요합니다. 그러한 경우에는 단순히 다수결이 중요합니다.

### 리드 타임 검토
사람들이 PR을 건너 뛰는 것을 본 가장 큰 이유 중 하나는 PR을 차단하기 때문입니다. 제품 팀이 배포를 추진할 때 PR이 검토 코드에 며칠 동안 남아있을 때 도움이되지 않습니다.

이상적으로는 1 시간 이내에 PR을 검토해야합니다. PR이이 게시물에 언급 된 관행을 따르고 있다면 이것이 가능할 것입니다. 고장난 곳은 대규모 PR에 있습니다.

따라서 PR을 최대한 작게 유지하고 검토가 신속하게 실행되도록하는 것이 매우 중요합니다.




<br/><br/>

## Reference
* https://www.kenneth-truyers.net/2018/11/01/best-practices-good-pr/
* https://madplay.github.io/post/google-code-review-guide
