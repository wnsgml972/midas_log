
# Programming Math

## 용어 정리

~~~
Vec1 = (a1, a2, a3)
Vec2 = (b1, b2, b3)
|Vec1| 은 Vec1의 크기를 의미
~~~

영어 | 한글 | 설명
---------|----------|----------
Vector | 벡터 | 크기와 방향을 가진 것
Scalar | 스칼라 | 크기만 가진 것
Normal Vector | 법선 벡터 | 평면에 수직인 벡터
Unit Vector | 단위 벡터 | 크기가 1인 벡터
Inverse Vector | 역벡터 | 벡터에 대해 크기는 같고 방향은 반대인 벡터
Dot | 내적 | 스칼라곱, 주로 점과 직선 사이의 거리를 구하는데 쓰임
Cross | 외적 | 텐서곱, 주로 법선 벡터를 구하는데 쓰임
Normalize | 정규화 | 0과 1이하로 데이터의 범위를 일치시키는 것 

~~~
Dot       :  Vec1·Vec2 = |Vec1|*|Vec2|*cosθ
Cross     :  |Vec1*Vec2| = |Vec1|*|Vec2|*sinθ
Cross     :  `Vec1*Vec2 = (a2b3-a3b2), a3b1-a1b3, a1b2-a2b1)`
Normalize :  벡터의 정규화는 벡터의 각 요소를 벡터의 길이로 나눔
~~~
<br/>

## 어파인 공간

**어파인 공간이란, 점을 마치 벡터처럼 취급함으로써 벡터 공간을 확장한 것이다.**

이러한 어파인 공간일 시 점 Q에서 P를 빼면 PQ-> 라는 벡터가 된다.

어파인 공간에서는 3가지 연산이 가능하다.

* 벡터와 벡터의 덧셈, 뺄셈
* 스칼라와 벡터의 곱셈, 나눗셈
* 점과 벡터의 덧셈, 뺄셈


<br/>

## vec(3, 4, 5)란?

> 고민하던 2가지가 모두 정답이라는 것을 이해하는데 쉽지 않았음.

3차원 좌표 상의 해당 위치를 뜻하는 Position으로서의 의미도 맞고, 방향을 가진 벡터의 시작점의 위치도 맞음!

예를들어 한 커브의 그래프가 있을 때 그 해당하는 커브의 3, 4, 5에 위치에서 그려지고 있는 커브는 방향이 있음 그 때의 vec(3, 4, 5)는 벡터의 시작점이자, 3차원 좌표상의 점도 맞음



<br/>

## 방향 벡터?, 점?, 그냥 벡터?

> 벡터는 크기와 방향을 가진 것이다. 즉 점과 점을 빼면 벡터가 나온다. 그 이유는 원점을 기준으로 벡터라고 정의했을 때 벡터와 벡터를 빼면 해당 그 사이의 벡터가 나옴

* 점은 그냥 3차원 좌표 상의 점이다! 
* 방향 벡터는 0, 0, 0을 기준으로 정의된 벡터이다.
* 그냥 벡터는 해당 Pos 위치에서 위의 설명한 것과 같은 벡터이다.



## 직선의 벡터 표현 (1점을 지나는 벡터)

~~~
Pos = (x1, x2, x3)
Dir-> = (u1, u2, u3)

Pos + kDir-> = Pos를 지나고 Dir과 평행한 벡터 Vec->

즉 
a-> + pB->
는 a를 지나고 B와 평행한 벡터임
~~~

### Reference

* [방향 벡터와 평행하고 점 x, y, z를 지나는 직선의 방정식](https://blog.naver.com/at3650/40203761799)



<br/>

## 공부할 때 참고한 전체 Reference

* <https://lypicfa.tistory.com/298?category=805276>



<br/>

# 실무

## CIM 좌표계

![xyz](/media/xyz.png)

<br/>

## Line2PointDistanceReference 구현

> 점과 직선이 있을 때, 해당 점을 지나고 직선의 법선벡터에서 교차점 구하기

### 알아야 할 것

* 직선의 벡터 표현
* 내적
* 어파인 공간 내에서의 벡터 기본 연산

### 유도 공식!

![math2](/media/math2.jpg)




<br/>

## Distance Widget 동작 구현

> 마우스 클릭 시 기존 위치에서 마우스가 움직인 거리로 Widget 움직이기

![math3](/media/math3.png)


### Ref
* [내적을 이용한 점과 직선 사이의 거리 구하기](https://m.blog.naver.com/PostView.nhn?blogId=yh6613&logNo=221212680685&proxyReferer=https%3A%2F%2Fwww.google.com%2F)






<br/>

## Angle Widget 동작 구현

> 마우스 클릭 시 기존 위치에서 마우스가 움직인 거리로 Widget 움직이기

![angle widget](/media/angle_widget.png)

### 기본 동작

`Distance Widget`의 공식을 이용하여 구한 거리는 Current Pos와 Center Pos의 방향까지 알 수 있다.
하지만 위는 직선을 기준으로 하고 있기 때문에 곡선의 경우 Center Pos의 거리와 Current Pos간의 거리는 법선 벡터의 길이로 정의 내릴 수 없다. **그렇기 때문에 점과 점 간의 거리를 구하고 위의 공식을 이용해 위 아래 방향만 정의하여 전체 구하려는 길이를 나타냈다.**

### Current Pos가 두 벡터 사잇값 밖에 존재함을 아는 공식

위의 그림에서 Current Pos가 갈 수 있는 위치는 다음과 같다. Case1, Case2, Case3 알아야할 것은 외적과 내적이다. 

#### Case1

검은색 두 선을 벡터 V1, V2라고 가정한다.

1. V1과 Case1을 외적하면 Z축 방향의 법선 벡터가 생긴다. 
1. V2과 Case1을 외적하면 위와 같은 방향의 법선 벡터가 생긴다. 
3. 두 법선 벡터를 내적하면 양수의 값이 나온다.
4. 양수의 값은 두 벡터 밖에 존재하는 값이다.

#### Case2
1. V1과 Case2을 외적하면 Z축 반대 방향의 법선 벡터가 생긴다. 
1. V2과 Case2을 외적하면 위와 반대 방향의 법선 벡터(Z축 방향)가 생긴다. 
3. 즉 두 법선 벡터를 내적하면 음수의 값이 나온다.
4. 음수의 값은 두 벡터 밖에 존재하는 값이다.

#### Case3

Case1과 같다.

위의 방법을 이용하여 현재 클릭한 점이 어느 위치에 찍은 것인지 알 수 있다.
